fs = require('fs')


// fs.writeFile('/tmp/testexec', 'echo 1',->
//   bash '/tmp/testexec'
//     echo r
// )

implode = (sep, a) ->
  Array.prototype.join.call(a,sep)

mgvg = (keys=false) ->
  $ = implode '  | xargs -d "\\n" ag -l ', keys
  cmd='ag -l '+$

  for keys
    cmd+=' | ag '+s

  cmd+=' | xargs -d "\\n" grep ^ | '

  cmd+='ag '
  $ = implode '|', keys
  cmd+=$
  #echo cmd
  exec cmd
    echo r


mgvg(['implode'])

echo 'works'
